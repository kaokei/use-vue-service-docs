---
author: 三棵树
title: 组件间通信方式
---

# 组件间通信方式

## 父子组件

父组件通过 props 传递数据给子组件
父组件监听子组件 emit 出来的事件，接受子组件的数据

**注意点一**
父组件不仅仅可以传递数据给子组件，也可以传递函数给子组件，然后在子组件中调用该函数，从而修改父组件中的数据。这种方式也是可以的，而且这也是 react 中的常规操作。

**注意点二**
子组件 emit 事件，如果是自定义事件，那么只会传递给父组件。父组件的父组件是接受不到该事件的。但是如果是原生事件，那么就能接收到。

## 兄弟组件

一般可以通过公共父组件来转发消息。首先把兄弟组件都需要的数据提升到父组件内。然后任意子组件都是和父组件进行交互。

还有一种方式则是通过公共事件总线来传递消息。`const bus = new Vue();`
在任意组件中可以

```
bus.$on('eventName', eventHandler);
bus.$emit('eventName');
```

## 跨多层的兄弟组件

这里也可以通过公共事件总线来解决，但是如果事件特别多，也不是很方便。

vue2 中推荐使用全局单一数据源 vuex，这样在任意组建中都可以获取到\$store 对象。
可以通过 commit 来修改数据，数据修改完视图自动更新。

vue3 中则建议直接使用本库`use-vue-service`，可以实现 SOA 以及面向领域编程。
和 vuex 最大的不同就是不一定是全局单一数据源。同一个服务可以有多个实例。
数据的生命周期和组件的生命周期一致。
